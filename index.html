<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-Game Hub</title>
<style>
body { font-family: Arial, sans-serif; background: #faf8ef; margin:0; padding:0; display:flex; flex-direction:column; align-items:center;}
header { text-align:center; margin:10px;}
.ad-container { margin:10px 0; width:100%; display:flex; justify-content:center;}
#game-container { background:#bbada0; border-radius:10px; padding:15px; display:inline-block; position: relative; touch-action:none; width: 350px; height: 350px;}
.grid { position: absolute; top:0; left:0; width:100%; height:100%; display:grid; grid-template-columns:repeat(4,1fr); grid-template-rows:repeat(4,1fr); grid-gap:10px;}
.tile { display:flex; justify-content:center; align-items:center; font-size:24px; font-weight:bold; border-radius:5px; transition: transform 0.2s, background 0.2s; position: absolute; width: calc(25% - 10px); height: calc(25% - 10px); }
.score { font-size:20px; margin-bottom:10px;}
button { background:#8f7a66; color:white; border:none; padding:8px 12px; border-radius:5px; cursor:pointer;}
button:hover { background:#7f6a56; }
select { padding:5px; margin-bottom:10px; }
</style>
</head>
<body>

<header>
    <h1>Multi-Game Hub</h1>
    <label for="game-select">Choose a game: </label>
    <select id="game-select">
        <option value="2048">2048</option>
        <option value="snake">Snake</option>
    </select>
    <div class="score" id="score-container">Score: <span id="score">0</span></div>
    <button onclick="startGame()">Restart</button>
</header>

<div id="game-container"></div>

<script>
const gameSelect = document.getElementById('game-select');
let currentGame = '2048';
let score = 0;
let size = 4;
let grid = [];
let tilesDiv = [];

gameSelect.addEventListener('change', () => {
    currentGame = gameSelect.value;
    startGame();
});

function startGame() {
    score = 0;
    if(currentGame === '2048') init2048();
    else if(currentGame === 'snake') initSnake();
    updateScore();
}

/* ---------------- 2048 ---------------- */
function init2048() {
    grid = [];
    tilesDiv = [];
    const container = document.getElementById('game-container');
    container.innerHTML = '';
    for(let i=0;i<size;i++){
        grid[i] = [];
        for(let j=0;j<size;j++){
            grid[i][j]=0;
        }
    }
    addRandomTile();
    addRandomTile();
    drawGrid();
}

function addRandomTile() {
    let empty = [];
    for(let i=0;i<size;i++){
        for(let j=0;j<size;j++){
            if(grid[i][j]===0) empty.push({x:i,y:j});
        }
    }
    if(empty.length===0) return;
    let {x,y} = empty[Math.floor(Math.random()*empty.length)];
    grid[x][y] = Math.random()<0.9 ? 2 : 4;
}

function drawGrid() {
    if(currentGame!=='2048') return;
    const container = document.getElementById('game-container');
    container.innerHTML='';
    tilesDiv=[];
    for(let i=0;i<size;i++){
        for(let j=0;j<size;j++){
            if(grid[i][j]!==0){
                let tile = document.createElement('div');
                tile.className='tile';
                tile.textContent = grid[i][j];
                tile.style.background = getTileColor(grid[i][j]);
                tile.style.color = grid[i][j]>4 ? '#f9f6f2' : '#776e65';
                tile.style.transform = `translate(${j*25}%, ${i*25}%)`;
                container.appendChild(tile);
                tilesDiv.push({el: tile, x:i, y:j});
            }
        }
    }
}

function getTileColor(value){
    const colors={2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#edc850",1024:"#edc53f",2048:"#edc22e"};
    return colors[value] || "#3c3a32";
}

function slide(row){
    row=row.filter(v=>v);
    for(let i=0;i<row.length-1;i++){ if(row[i]===row[i+1]){ row[i]*=2; score+=row[i]; row[i+1]=0; } }
    row=row.filter(v=>v);
    while(row.length<size) row.push(0);
    return row;
}

function moveLeft(){ for(let i=0;i<size;i++){ grid[i]=slide(grid[i]); } }
function moveRight(){ for(let i=0;i<size;i++){ grid[i].reverse(); grid[i]=slide(grid[i]); grid[i].reverse(); } }
function moveUp(){ for(let j=0;j<size;j++){ let col=[]; for(let i=0;i<size;i++) col.push(grid[i][j]); col=slide(col); for(let i=0;i<size;i++) grid[i][j]=col[i]; } }
function moveDown(){ for(let j=0;j<size;j++){ let col=[]; for(let i=0;i<size;i++) col.push(grid[i][j]); col.reverse(); col=slide(col); col.reverse(); for(let i=0;i<size;i++) grid[i][j]=col[i]; } }

function handleKey(e){
    if(currentGame==='2048'){
        let oldGrid = JSON.stringify(grid);
        if(e.key==='ArrowLeft') moveLeft();
        else if(e.key==='ArrowRight') moveRight();
        else if(e.key==='ArrowUp') moveUp();
        else if(e.key==='ArrowDown') moveDown();
        if(JSON.stringify(grid)!==oldGrid) addRandomTile();
        drawGrid();
    }
    else if(currentGame==='snake'){ handleSnakeKey(e); }
}

document.addEventListener('keydown', handleKey);
function updateScore(){ document.getElementById('score').textContent=score; }

/* ---------------- Snake ---------------- */
let snake, direction, food, snakeInterval;
function initSnake(){
    clearInterval(snakeInterval);
    const container = document.getElementById('game-container');
    container.innerHTML = '';
    const cellSize = container.clientWidth / 20;
    snake = [{x:10,y:10}];
    direction = {x:0,y:-1};
    food = {x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20)};
    snakeInterval = setInterval(moveSnake,100);
    drawSnake();
}

function drawSnake(){
    const container = document.getElementById('game-container');
    container.innerHTML = '';
    const cellSize = container.clientWidth / 20;
    // Draw food
    const foodEl = document.createElement('div');
    foodEl.style.width = foodEl.style.height = cellSize + 'px';
    foodEl.style.background = 'red';
    foodEl.style.position = 'absolute';
    foodEl.style.left = food.x*cellSize + 'px';
    foodEl.style.top = food.y*cellSize + 'px';
    container.appendChild(foodEl);
    // Draw snake
    snake.forEach(segment=>{
        const el = document.createElement('div');
        el.style.width = el.style.height = cellSize + 'px';
        el.style.background = 'green';
        el.style.position = 'absolute';
        el.style.left = segment.x*cellSize + 'px';
        el.style.top = segment.y*cellSize + 'px';
        container.appendChild(el);
    });
}

function moveSnake(){
    const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
    if(head.x<0 || head.x>=20 || head.y<0 || head.y>=20 || snake.some(s=>s.x===head.x && s.y===head.y)){
        clearInterval(snakeInterval);
        alert('Game Over!');
        return;
    }
    snake.unshift(head);
    if(head.x===food.x && head.y===food.y){
        score += 10;
        updateScore();
        food = {x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20)};
    } else {
        snake.pop();
    }
    drawSnake();
}

function handleSnakeKey(e){
    if(e.key==='ArrowUp' && direction.y!==1) direction={x:0,y:-1};
    else if(e.key==='ArrowDown' && direction.y!==-1) direction={x:0,y:1};
    else if(e.key==='ArrowLeft' && direction.x!==1) direction={x:-1,y:0};
    else if(e.key==='ArrowRight' && direction.x!==-1) direction={x:1,y:0};
}

startGame();
</script>

</body>
</html>
